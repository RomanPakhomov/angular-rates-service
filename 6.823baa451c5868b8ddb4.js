(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"05Zx":function(e,i,n){"use strict";n.r(i),n.d(i,"SettingsFormModule",function(){return I});var t=n("ofXK"),o=n("tyNb"),s=n("Fumy"),r=n("fXoL"),a=n("l7P3"),l=n("3Pt+");function c(e){return i=>e.test(i.value)?null:{forbiddenField:{value:i.value}}}var u=n("mYIz"),b=n("uurS"),f=n("qfBg"),d=n("5eHb");function m(e,i){1&e&&(r.Qb(0,"span"),r.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c"),r.Pb())}function p(e,i){if(1&e&&(r.Qb(0,"div",17),r.nc(1,m,2,0,"span",18),r.Pb()),2&e){const e=r.Zb();r.Ab(1),r.fc("ngIf",null==e.userName||null==e.userName.errors?null:e.userName.errors.required)}}function h(e,i){1&e&&(r.Qb(0,"span"),r.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email "),r.Pb())}function v(e,i){1&e&&(r.Qb(0,"span"),r.oc(1,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"),r.Pb())}function g(e,i){if(1&e&&(r.Qb(0,"div",17),r.nc(1,h,2,0,"span",18),r.nc(2,v,2,0,"span",18),r.Pb()),2&e){const e=r.Zb(2);r.Ab(1),r.fc("ngIf",null==e.email||null==e.email.errors?null:e.email.errors.required),r.Ab(1),r.fc("ngIf",!(null!=e.email&&null!=e.email.errors&&e.email.errors.required)&&(null==e.email||null==e.email.errors?null:e.email.errors.forbiddenField))}}function y(e,i){1&e&&(r.Qb(0,"span"),r.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"),r.Pb())}function P(e,i){1&e&&(r.Qb(0,"span"),r.oc(1,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"),r.Pb())}function w(e,i){if(1&e&&(r.Qb(0,"div",17),r.nc(1,y,2,0,"span",18),r.nc(2,P,2,0,"span",18),r.Pb()),2&e){const e=r.Zb(2);r.Ab(1),r.fc("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.required),r.Ab(1),r.fc("ngIf",!(null!=e.phone&&null!=e.phone.errors&&e.phone.errors.required)&&(null==e.phone||null==e.phone.errors?null:e.phone.errors.forbiddenField))}}function Q(e,i){if(1&e&&(r.Qb(0,"div",5),r.Qb(1,"div",3),r.Qb(2,"div",4),r.Mb(3,"input",19),r.Qb(4,"label",20),r.oc(5,"Email"),r.Pb(),r.Pb(),r.Qb(6,"div",5),r.Mb(7,"input",21),r.nc(8,g,3,2,"div",9),r.Pb(),r.Pb(),r.Qb(9,"div",3),r.Qb(10,"div",4),r.Mb(11,"input",22),r.Qb(12,"label",23),r.oc(13,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.Pb(),r.Pb(),r.Qb(14,"div",5),r.Mb(15,"input",24),r.nc(16,w,3,2,"div",9),r.Pb(),r.Pb(),r.Pb()),2&e){const e=r.Zb();r.Ab(7),r.Db("is-invalid",e.email&&e.email.invalid&&(e.email.dirty||e.email.touched)),r.Ab(1),r.fc("ngIf",e.email&&e.email.invalid&&(e.email.dirty||e.email.touched)),r.Ab(7),r.Db("is-invalid",e.phone&&e.phone.invalid&&(e.phone.dirty||e.phone.touched)),r.Ab(1),r.fc("ngIf",e.phone&&e.phone.invalid&&(e.phone.dirty||e.phone.touched))}}let N=(()=>{class e{constructor(e,i,n,t,o){this.formBuilder=e,this.router=i,this.userService=n,this.toastr=t,this.state=o,this.user=null,this.form=new l.i({}),this.notificationsSubscription=null,this.notificationsTypeSubscription=null,this.showNotifycationsWays=!1}ngOnInit(){var e;(null===(e=this.user)||void 0===e?void 0:e.fullName)||this.router.navigate(["/"]),this.createForm()}createForm(e=this.user){this.form=this.formBuilder.group({fullName:new l.f({value:null==e?void 0:e.fullName,disabled:!0},[l.p.maxLength(200)]),userName:new l.f(null==e?void 0:e.userName,[l.p.required,l.p.maxLength(200)]),email:new l.f({value:null==e?void 0:e.email,disabled:(null==e?void 0:e.notificationsType)!==b.a.email},[l.p.required,l.p.minLength(4),l.p.maxLength(200),c(/@/)]),phone:new l.f({value:null==e?void 0:e.phone,disabled:(null==e?void 0:e.notificationsType)!==b.a.phone},[l.p.required,l.p.minLength(11),l.p.maxLength(11),c(/^89/),c(/[0-9]/)]),notifications:new l.f(null==e?void 0:e.notifications),notificationsType:new l.f(null==e?void 0:e.notificationsType)}),this.showNotifycationsWays=Boolean(null==e?void 0:e.notifications),this.createFormListeners()}get userName(){return this.form.get("userName")}get email(){return this.form.get("email")}get phone(){return this.form.get("phone")}createFormListeners(){this.notificationsSubscription=this.form.controls.notifications.valueChanges.subscribe(e=>{this.showNotifycationsWays=e}),this.notificationsTypeSubscription=this.form.controls.notificationsType.valueChanges.subscribe(e=>{switch(e){case b.a.email:this.form.controls.email.enable(),this.form.controls.phone.disable();break;case b.a.phone:this.form.controls.phone.enable(),this.form.controls.email.disable()}})}submit(){var e,i;this.userService.saveUser(Object.assign({id:null===(e=this.user)||void 0===e?void 0:e.id,options:null===(i=this.user)||void 0===i?void 0:i.options},this.form.getRawValue())),this.user&&(this.state.dispatch(new u.d),this.state.dispatch(new u.b(this.user.id))),this.showSuccess(),this.createForm(this.form.getRawValue())}reset(){this.createForm()}showSuccess(){this.toastr.success("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","")}ngOnDestroy(){var e,i;null===(e=this.notificationsSubscription)||void 0===e||e.unsubscribe(),null===(i=this.notificationsTypeSubscription)||void 0===i||i.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)(r.Lb(l.e),r.Lb(o.e),r.Lb(f.a),r.Lb(d.b),r.Lb(a.h))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-settings-form"]],inputs:{user:"user"},decls:26,vars:7,consts:[[1,"card"],[1,"card-body"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"row","no-gutters","mb-2"],[1,"col-4"],[1,"col-8"],["formControlName","fullName","type","text",1,"w-100"],[1,"row","no-gutters","mb-4"],["formControlName","userName","type","text",1,"w-100"],["class","invalid-feedback",4,"ngIf"],[1,"form-check"],["formControlName","notifications","type","checkbox","id","notification",1,"form-check-input","notification"],["for","notification",1,"form-check-label"],["class","col-8",4,"ngIf"],[1,"button-container"],["type","button",1,"btn","btn-danger","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","notificationsType","name","notificationsType","value","email","type","radio",1,"email","mr-1"],["for","email"],["formControlName","email","type","text",1,"w-100"],["formControlName","notificationsType","name","notificationsType","value","phone","type","radio",1,"phone","mr-1"],["for","phone"],["formControlName","phone","type","text",1,"w-100"]],template:function(e,i){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"form",2),r.Xb("ngSubmit",function(){return i.submit()}),r.Qb(3,"div",3),r.Qb(4,"div",4),r.oc(5," \u0424\u0418\u041e "),r.Pb(),r.Qb(6,"div",5),r.Mb(7,"input",6),r.Pb(),r.Pb(),r.Qb(8,"div",7),r.Qb(9,"div",4),r.oc(10," \u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c "),r.Pb(),r.Qb(11,"div",5),r.Mb(12,"input",8),r.nc(13,p,2,1,"div",9),r.Pb(),r.Pb(),r.Qb(14,"div",7),r.Qb(15,"div",4),r.Qb(16,"div",10),r.Mb(17,"input",11),r.Qb(18,"label",12),r.oc(19,"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"),r.Pb(),r.Pb(),r.Pb(),r.nc(20,Q,17,6,"div",13),r.Pb(),r.Qb(21,"div",14),r.Qb(22,"button",15),r.Xb("click",function(){return i.reset()}),r.oc(23,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),r.Pb(),r.Qb(24,"button",16),r.Xb("click",function(){return i.submit()}),r.oc(25,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.Ab(2),r.fc("formGroup",i.form),r.Ab(10),r.Db("is-invalid",i.userName&&i.userName.invalid&&(i.userName.dirty||i.userName.touched)),r.Ab(1),r.fc("ngIf",i.userName&&i.userName.invalid&&(i.userName.dirty||i.userName.touched)),r.Ab(7),r.fc("ngIf",i.showNotifycationsWays),r.Ab(2),r.fc("disabled",i.form.pristine),r.Ab(2),r.fc("disabled",i.form.invalid))},directives:[l.q,l.m,l.j,l.b,l.l,l.h,t.j,l.a,l.n],styles:[".user-form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{display:block}.user-form[_ngcontent-%COMP%]   .is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffebeb;border-width:thin;border-radius:2px}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"],changeDetection:0}),e})();const k=[{path:"",component:(()=>{class e{constructor(e){this.state=e,this.user=this.state.select(s.a)}}return e.\u0275fac=function(i){return new(i||e)(r.Lb(a.h))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-settings-form-page"]],decls:2,vars:3,consts:[[3,"user"]],template:function(e,i){1&e&&(r.Mb(0,"app-settings-form",0),r.ac(1,"async")),2&e&&r.fc("user",r.bc(1,1,i.user))},directives:[N],pipes:[t.b],styles:[""],changeDetection:0}),e})()}];let C=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(i){return new(i||e)},imports:[[o.g.forChild(k)],o.g]}),e})(),I=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(i){return new(i||e)},imports:[[t.c,l.k,l.o,C]]}),e})()}}]);