(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"05Zx":function(e,n,i){"use strict";i.r(n),i.d(n,"SettingsFormModule",function(){return x});var t=i("ofXK"),o=i("tyNb"),r=i("Fumy"),s=i("fXoL"),a=i("l7P3"),c=i("3Pt+");function l(e){return n=>e.test(n.value)?null:{forbiddenField:{value:n.value}}}var u=i("mYIz"),b=i("uurS"),m=i("qfBg"),f=i("5eHb");function d(e,n){1&e&&(s.Qb(0,"span"),s.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c"),s.Pb())}function p(e,n){if(1&e&&(s.Qb(0,"div",18),s.nc(1,d,2,0,"span",19),s.Pb()),2&e){const e=s.Zb();s.Ab(1),s.fc("ngIf",null==e.userName||null==e.userName.errors?null:e.userName.errors.required)}}function h(e,n){1&e&&(s.Qb(0,"span"),s.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email "),s.Pb())}function v(e,n){1&e&&(s.Qb(0,"span"),s.oc(1,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"),s.Pb())}function g(e,n){if(1&e&&(s.Qb(0,"div",18),s.nc(1,h,2,0,"span",19),s.nc(2,v,2,0,"span",19),s.Pb()),2&e){const e=s.Zb(2);s.Ab(1),s.fc("ngIf",null==e.email||null==e.email.errors?null:e.email.errors.required),s.Ab(1),s.fc("ngIf",!(null!=e.email&&null!=e.email.errors&&e.email.errors.required)&&(null==e.email||null==e.email.errors?null:e.email.errors.forbiddenField))}}function y(e,n){1&e&&(s.Qb(0,"span"),s.oc(1,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d"),s.Pb())}function P(e,n){1&e&&(s.Qb(0,"span"),s.oc(1,"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442"),s.Pb())}function w(e,n){if(1&e&&(s.Qb(0,"div",18),s.nc(1,y,2,0,"span",19),s.nc(2,P,2,0,"span",19),s.Pb()),2&e){const e=s.Zb(2);s.Ab(1),s.fc("ngIf",null==e.phone||null==e.phone.errors?null:e.phone.errors.required),s.Ab(1),s.fc("ngIf",!(null!=e.phone&&null!=e.phone.errors&&e.phone.errors.required)&&(null==e.phone||null==e.phone.errors?null:e.phone.errors.forbiddenField))}}function Q(e,n){if(1&e&&(s.Qb(0,"div",20),s.Qb(1,"div",3),s.Qb(2,"div",4),s.Mb(3,"input",21),s.Qb(4,"label",22),s.oc(5,"Email"),s.Pb(),s.Pb(),s.Qb(6,"div",5),s.Mb(7,"input",23),s.nc(8,g,3,2,"div",9),s.Pb(),s.Pb(),s.Qb(9,"div",3),s.Qb(10,"div",4),s.Mb(11,"input",24),s.Qb(12,"label",25),s.oc(13,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),s.Pb(),s.Pb(),s.Qb(14,"div",5),s.Mb(15,"input",26),s.nc(16,w,3,2,"div",9),s.Pb(),s.Pb(),s.Pb()),2&e){const e=s.Zb();s.Ab(7),s.Db("is-invalid",e.email&&e.email.invalid&&(e.email.dirty||e.email.touched)),s.Ab(1),s.fc("ngIf",e.email&&e.email.invalid&&(e.email.dirty||e.email.touched)),s.Ab(7),s.Db("is-invalid",e.phone&&e.phone.invalid&&(e.phone.dirty||e.phone.touched)),s.Ab(1),s.fc("ngIf",e.phone&&e.phone.invalid&&(e.phone.dirty||e.phone.touched))}}let N=(()=>{class e{constructor(e,n,i,t,o){this.formBuilder=e,this.router=n,this.userService=i,this.toastr=t,this.state=o,this.user=null,this.form=new c.i({}),this.notificationsSubscription=null,this.notificationsTypeSubscription=null,this.showNotifycationsWays=!1}ngOnInit(){var e;(null===(e=this.user)||void 0===e?void 0:e.fullName)||this.router.navigate(["/"]),this.createForm()}createForm(e=this.user){this.form=this.formBuilder.group({fullName:new c.f({value:null==e?void 0:e.fullName,disabled:!0},[c.p.maxLength(200)]),userName:new c.f(null==e?void 0:e.userName,[c.p.required,c.p.maxLength(200)]),email:new c.f({value:null==e?void 0:e.email,disabled:(null==e?void 0:e.notificationsType)!==b.a.email},[c.p.required,c.p.minLength(4),c.p.maxLength(200),l(/@/)]),phone:new c.f({value:null==e?void 0:e.phone,disabled:(null==e?void 0:e.notificationsType)!==b.a.phone},[c.p.required,c.p.minLength(11),c.p.maxLength(11),l(/^89/),l(/[0-9]/)]),notifications:new c.f(null==e?void 0:e.notifications),notificationsType:new c.f(null==e?void 0:e.notificationsType)}),this.showNotifycationsWays=Boolean(null==e?void 0:e.notifications),this.createFormListeners()}get userName(){return this.form.get("userName")}get email(){return this.form.get("email")}get phone(){return this.form.get("phone")}createFormListeners(){this.notificationsSubscription=this.form.controls.notifications.valueChanges.subscribe(e=>{this.showNotifycationsWays=e}),this.notificationsTypeSubscription=this.form.controls.notificationsType.valueChanges.subscribe(e=>{switch(e){case b.a.email:this.form.controls.email.enable(),this.form.controls.phone.disable();break;case b.a.phone:this.form.controls.phone.enable(),this.form.controls.email.disable()}})}submit(){var e,n;this.userService.saveUser(Object.assign({id:null===(e=this.user)||void 0===e?void 0:e.id,options:null===(n=this.user)||void 0===n?void 0:n.options},this.form.getRawValue())),this.user&&(this.state.dispatch(new u.d),this.state.dispatch(new u.b(this.user.id))),this.showSuccess(),this.createForm(this.form.getRawValue())}reset(){this.createForm()}showSuccess(){this.toastr.success("\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b","")}ngOnDestroy(){var e,n;null===(e=this.notificationsSubscription)||void 0===e||e.unsubscribe(),null===(n=this.notificationsTypeSubscription)||void 0===n||n.unsubscribe()}}return e.\u0275fac=function(n){return new(n||e)(s.Lb(c.e),s.Lb(o.e),s.Lb(m.a),s.Lb(f.b),s.Lb(a.h))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-settings-form"]],inputs:{user:"user"},decls:26,vars:7,consts:[[1,"card"],[1,"card-body"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"row","no-gutters","mb-2"],[1,"col-4"],[1,"col-8"],["formControlName","fullName","type","text",1,"w-100"],[1,"row","no-gutters","mb-4"],["formControlName","userName","type","text",1,"w-100"],["class","invalid-feedback",4,"ngIf"],[1,"col-md-4","col-sm-12","mb-4"],[1,"form-check"],["formControlName","notifications","type","checkbox","id","notification",1,"form-check-input","notification"],["for","notification",1,"form-check-label"],["class","col-md-8 col-sm-12",4,"ngIf"],[1,"button-container"],["type","button",1,"btn","btn-danger","btn-sm",3,"disabled","click"],["type","button",1,"btn","btn-success","btn-sm",3,"disabled","click"],[1,"invalid-feedback"],[4,"ngIf"],[1,"col-md-8","col-sm-12"],["formControlName","notificationsType","name","notificationsType","value","email","type","radio","id","email",1,"email","mr-1"],["for","email"],["formControlName","email","type","text",1,"w-100"],["formControlName","notificationsType","name","notificationsType","value","phone","type","radio","id","phone",1,"phone","mr-1"],["for","phone"],["formControlName","phone","type","text",1,"w-100"]],template:function(e,n){1&e&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"form",2),s.Xb("ngSubmit",function(){return n.submit()}),s.Qb(3,"div",3),s.Qb(4,"div",4),s.oc(5," \u0424\u0418\u041e "),s.Pb(),s.Qb(6,"div",5),s.Mb(7,"input",6),s.Pb(),s.Pb(),s.Qb(8,"div",7),s.Qb(9,"div",4),s.oc(10," \u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c "),s.Pb(),s.Qb(11,"div",5),s.Mb(12,"input",8),s.nc(13,p,2,1,"div",9),s.Pb(),s.Pb(),s.Qb(14,"div",7),s.Qb(15,"div",10),s.Qb(16,"div",11),s.Mb(17,"input",12),s.Qb(18,"label",13),s.oc(19,"\u041e\u043f\u043e\u0432\u0435\u0449\u0435\u043d\u0438\u044f"),s.Pb(),s.Pb(),s.Pb(),s.nc(20,Q,17,6,"div",14),s.Pb(),s.Qb(21,"div",15),s.Qb(22,"button",16),s.Xb("click",function(){return n.reset()}),s.oc(23,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),s.Pb(),s.Qb(24,"button",17),s.Xb("click",function(){return n.submit()}),s.oc(25,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.Ab(2),s.fc("formGroup",n.form),s.Ab(10),s.Db("is-invalid",n.userName&&n.userName.invalid&&(n.userName.dirty||n.userName.touched)),s.Ab(1),s.fc("ngIf",n.userName&&n.userName.invalid&&(n.userName.dirty||n.userName.touched)),s.Ab(7),s.fc("ngIf",n.showNotifycationsWays),s.Ab(2),s.fc("disabled",n.form.pristine),s.Ab(2),s.fc("disabled",n.form.pristine&&n.form.valid))},directives:[c.q,c.m,c.j,c.b,c.l,c.h,t.j,c.a,c.n],styles:[".user-form[_ngcontent-%COMP%]   .invalid-feedback[_ngcontent-%COMP%]{display:block}.user-form[_ngcontent-%COMP%]   .is-invalid[_ngcontent-%COMP%]{border-color:#dc3545;background-color:#ffebeb;border-width:thin;border-radius:2px}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}@media (max-width:320px){.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width:320px){.user-form[_ngcontent-%COMP%]   [class*=col-][_ngcontent-%COMP%]{min-width:100%;flex:0 0 100%}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{flex-direction:column}.user-form[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-bottom:.5rem}}"],changeDetection:0}),e})();const C=[{path:"",component:(()=>{class e{constructor(e){this.state=e,this.user=this.state.select(r.a)}}return e.\u0275fac=function(n){return new(n||e)(s.Lb(a.h))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-settings-form-page"]],decls:2,vars:3,consts:[[3,"user"]],template:function(e,n){1&e&&(s.Mb(0,"app-settings-form",0),s.ac(1,"async")),2&e&&s.fc("user",s.bc(1,1,n.user))},directives:[N],pipes:[t.b],styles:[""],changeDetection:0}),e})()}];let M=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(n){return new(n||e)},imports:[[o.g.forChild(C)],o.g]}),e})(),x=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(n){return new(n||e)},imports:[[t.c,c.k,c.o,M]]}),e})()}}]);